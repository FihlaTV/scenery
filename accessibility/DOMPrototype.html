<html>

<head>
  <script src="accessibility-script.js"></script>
  <script type="text/javascript" src="../../sherpa/lib/lodash-2.4.1.min.js"></script>
</head>

<div aria-labelledby='simTitle'>
  <h1 id='simTitle'>Forces and Motion: Basics</h1>

  <div hidden aria-labelledby='homeLabel' aria-describedby='homeDescription'>
    <h2 id='homeLabel'>Home Screen</h2>

    <p id='homeDescription'>
      Home screen for Forces and Motion Basics. Navigate to the
      buttons to open the simulation screens.
    </p>
    <input type='image' alt='Net Force Screen' src='' id='netForceId'>
    <input type='image' alt='Motion Screen' src='' id='motionId'>
    <input type='image' alt='Friction Screen' src='' id='frictionId'>
    <input type='image' alt='Accelleration Screen' src='' id='accellerationId'>
    <input type='image' alt='Phet Menu' src='' id='phetMenuButton'>
  </div>

  <div aria-labelledby='netForceLabel'>
    <h2 id='netForceLabel'>Net Force</h2>

    <p id=netForceDescription>
      There is a heavily loaded cart on
      wheels sitting on a track...
    </p>

    <fieldset tabindex='0' aria-labelledby='leftGroupDescription' id='leftPullerGroup'>
      <input type='image' alt='Left group, large puller' draggable='true' id="firstLeftPuller" hidden>
      <input type='image' alt='Left group, medium puller' draggable='true' hidden>
      <input type='image' alt='Left group, first small puller' draggable='true' hidden>
      <input type='image' alt='Left group, second small puller' draggable='true' hidden>
    </fieldset>
    <p id='leftGroupDescription'>
      Left pullers. Select enter to choose and place pullers on the rope.
    </p>

    <fieldset tabindex='0' aria-labelledby="rightGroupDescription" id='rightPullerGroup'>
      <input type='image' alt='Right group, first small puller' draggable='true' hidden id="firstRightPuller">
      <input type='image' alt='Right group, second small puller' draggable='true' hidden>
      <input type='image' alt='Right group, medium puller' draggable='true' hidden>
      <input type='image' alt='Right group, large puller' draggable='true' hidden>
    </fieldset>
    <p tabindex="-1" id='rightGroupDescription'>
      Right pullers. Select enter to choose and place pullers on the rope.
    </p>

    <fieldset hidden>
      <input type='image' alt='First knot, closest to the cart'>
      <input type='image' alt='Second knot'>
      <input type='image' alt='Third knot'>
      <input type='image' alt='Fourth knot, farthest from the cart'>
    </fieldset>

    <fieldset hidden>
      <input type='image' alt='First knot, closest to the cart'>
      <input type='image' alt='Second knot'>
      <input type='image' alt='Third knot'>
      <input type='image' alt='Fourth knot, farthest from the cart'>
    </fieldset>

    <input type='button' value='Go' aria-disabled='true' aria-describedby='goButtonDescription'>

    <p id='goButtonDescription'>Select to start pullers</p>

    <input type='button' value='Pause' aria-disabled='true' aria-describedby='pauseButtonDescription'>

    <p id='pauseButtonDescription'>Select to pause pullers</p>

    <fieldset>
      <legend>Visibility Controls</legend>
      <input type='checkbox' id='sumOfForcesCheckbox'>
      <label for='sumOfForcesCheckbox'>Sum of Forces</label><br>
      <input type='checkbox' id='valuesCheckbox'>
      <label for='valuesCheckbox'>Values</label>
    </fieldset>

    <input type='reset' value='Reset all' aria-describedby='resetAllDescription'>

    <p id='resetAllDescription'>Select to reset screen</p>

    <input type='button' value='Toggle sound' aria-describedby='toggleSoundDescription'>

    <p id='toggleSoundDescription'>Select to toggle sound</p>

    <!--Element used to alert the user that an action or event has occured in the simulation-->
    <p><span id="ariaActionElement" role="alert" aria-atomic="true"></span></p>
    <!--<p id="ariaActionElement" aria-live="polite" aria-atomic="true"></p>-->

  </div>

  <div hidden>Motion Screen</div>

  <div hidden>Friction Screen</div>

  <div hidden>Accelleration Screen</div>
</div>

<script>


  // get the puller groups and the first elements in each group.
  var rightPullerGroup = document.getElementById( 'rightPullerGroup' );
  var firstRightPuller = document.getElementById( 'firstRightPuller' );
  var firstLeftPuller = document.getElementById( 'firstLeftPuller' );
  var leftPullerGroup = document.getElementById( 'leftPullerGroup' );

  rightPullerGroup.addEventListener( 'keydown', function( event ) {
    // prevent the the event from bubbling.
    if ( rightPullerGroup !== event.target ) { return; }
    enterGroup( event, rightPullerGroup, firstRightPuller )
  } );

  rightPullerGroup.addEventListener( 'keydown', function( event ) {
    exitGroup( event, rightPullerGroup );
  } );

  leftPullerGroup.addEventListener( 'keydown', function( event ) {
    // prevent the the event from bubbling.
    if ( leftPullerGroup !== event.target ) { return; }
    enterGroup( event, leftPullerGroup, firstLeftPuller )
  } );

  leftPullerGroup.addEventListener( 'keydown', function( event ) {
    exitGroup( event, leftPullerGroup );
  } );

  _.each( rightPullerGroup.children, function( child ) {
    child.addEventListener( 'keydown', function( event ) {
      focusNextElement( event, child );
      placePullerOnKnot( event, child );
    } );
  } );

  _.each( leftPullerGroup.children, function( child ) {
    child.addEventListener( 'keydown', function( event ) {
      focusNextElement( event, child );
      placePullerOnKnot( event, child );
    } );
  } );

</script>
</html>
		
