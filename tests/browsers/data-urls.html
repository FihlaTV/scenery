<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Data url testing</title>
  
  <style>
  </style>
</head>
<body>
  
  <svg xmlns='http://www.w3.org/2000/svg' width='242' height='127'>
    <linearGradient id='gradient'><stop offset='10%' stop-color='#F00'/><stop offset='90%' stop-color='#fcc'/></linearGradient>
    <rect fill='url(#gradient)' x='0' y='0' width='100%' height='100%'/>
  </svg>
  
  <img id="svg-gradient-image" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='242' height='127'><linearGradient id='gradient'><stop offset='10%' stop-color='#F00'/><stop offset='90%' stop-color='#fcc'/></linearGradient><rect fill='url(#gradient)' x='0' y='0' width='100%' height='100%'/></svg>" alt="Now with data-url goodness!"/>
  
  <svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='242' height='127'>
    <image xlink:href='http://phet.colorado.edu/images/phet-logo-yellow.png' x='0' y='0' height='127px' width='242px'/>
  </svg>
  
  <img id="svg-external-image" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='242' height='127'><image xlink:href='http://phet.colorado.edu/images/phet-logo-yellow.png' x='0' y='0' height='127px' width='242px'/></svg>" alt="Now with data-url goodness!"/>
  
  <canvas id="canvas" width="242" height="127"></canvas>

  <script type="text/javascript">
  
  window.onload = function() {
    var context = document.getElementById( 'canvas' ).getContext( '2d' );
    var image = document.getElementById( 'svg-external-image' );
    // var image = document.getElementById( 'svg-gradient-image' );
    
    context.drawImage( image, 0, 0 );
    // context.fillStyle = context.createPattern( image, 'repeat' );
    // context.fillRect( 0, 0, 50, 50 );
    
    // console.log( context.getImageData( 0, 0, 10, 10 ) );
  };
  
  
  </script>

</body>
</html>
