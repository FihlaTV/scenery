<!--
Simplified test that just draws a rectangle.
@author Sam Reid
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="phet-sim-level" content="production">

  <!--<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />-->
  <!--<meta http-equiv="Pragma" content="no-cache" />-->
  <!--<meta http-equiv="Expires" content="0" />-->

  <title>Simulation Test WebGL</title>

  <!-- jQuery and LoDash are dependencies -->
  <script src="../../../assert/js/assert.js"></script>
  <script src="../../../sherpa/jquery-2.1.0.min.js"></script>
  <script src="../../../sherpa/lodash-2.4.1.min.js"></script>
  <script src="../../../sherpa/has.js"></script>
  <script src="../../../sherpa/stats-r12.js"></script>
  <script src="../../../sherpa/poly2tri-1.3.5.js"></script>

  <!-- Parse query parameters, so we can easily subset the tests.-->
  <script src="../../../phetcommon/js/util/query-parameters.js"></script>

  <script type="text/javascript">
    window.assertions.enableAssert();
  </script>

  <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
  <script data-main="../../js/config.js" src="../../../sherpa/require-2.1.11.js"></script>

</head>

<body>

<script>

  document.onready = function() {
    require( [
      '../js/main',
      '../js/display/webgl/TestWebGL',
      '../js/nodes/Rectangle',
      '../js/nodes/Path',
      '../../kite/js/Shape'
    ], function( scenery, TestWebGL, Rectangle, Path, Shape ) {

      var testWebGL = new TestWebGL();

      // TODO: Add a uniform matrix4 for transforming vertices to the -1,-1,1,1 rectangle
      testWebGL.trianglesGeometry.createFromRectangle( new Rectangle( 0, 0, 1024, 100, {fill: 'red'} ) );
      testWebGL.trianglesGeometry.createFromRectangle( new Rectangle( 100, 0, 100, 100, {fill: 'green'} ) );
      testWebGL.trianglesGeometry.createFromRectangle( new Rectangle( 200, 0, 100, 100, {fill: 'blue'} ) );
      testWebGL.trianglesGeometry.createFromPath( new Rectangle( 100, 100, 100, 100, 20, 20, {fill: 'blue'} ) );
      testWebGL.trianglesGeometry.createFromPath( new Path( Shape.circle( 300, 300, 50 ), {fill: 'blue'} ) );
      testWebGL.trianglesGeometry.createFromPath( new Path( Shape.circle( 600, 600, 200 ), {fill: 'red'} ) );

      for ( var i = 0; i < 20; i++ ) {
        testWebGL.trianglesGeometry.createFromPath( new Path( Shape.circle( 600 * Math.random(), 600 * Math.random(), 200 * Math.random() ), {fill: 'red'} ) );
      }
      testWebGL.bindVertexBuffer();
      testWebGL.bindColorBuffer();

//      testWebGL.draw();

      testWebGL.start();
    } );
  };
</script>

</body>
</html>
