<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="apple-mobile-web-app-capable" content="yes">

  <title>Scenery logo mockup test</title>
  
  <link rel="stylesheet" href="../../sherpa/bootstrap-2.2.2.css">
  
  <style type="text/css">
    @import url(https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic);
    @import url(http://fonts.googleapis.com/css?family=Noto+Sans:300,700,300italic,700italic);
    @import url(http://fonts.googleapis.com/css?family=Muli:300,700,300italic,700italic);
  </style>
  
  <!-- jQuery and LoDash are dependencies -->
  <script src="../../sherpa/jquery-2.1.0.min.js"></script>
  <script src="../../sherpa/lodash-2.4.1.min.js"></script>
  
  <!-- Bootstrap not necessarily needed -->
  <script src="../../sherpa/bootstrap-2.2.2.js"></script>
  
  <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
  <script src="../build/development/scenery.js"></script>
  <!-- <script src="../build/standalone/scenery.min.js"></script> -->
  
  <style type="text/css">
    /* Let content go to the edges */
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      background-color: #ff0;
      overflow: hidden;
    }
    
    /* Have the #main div cover the entire viewport */
    #main {
      position: absolute; /* position !== inherit is required so that Scenery's absolutely-positioned children are placed correctly */
      left: 0;
      top: 0;
      background-color: #fff;
    }

  </style>
</head>

<body>
  
  <!-- our scene graph will be in this div -->
  <div id="main">
  </div>

  <script>
  
  var $main = $( '#main' );

  // initialize our scene
  var scene = new scenery.Scene( $main );
  scene.initializeFullscreenEvents(); // sets up listeners on the document with preventDefault(), and forwards those events to our scene
  scene.resizeOnWindowResize(); // the scene gets resized to the full screen size
  
  function createTree( leafColor, options ) {
    var treeWidth = 3;
    
    var leafShape = new kite.Shape().moveTo( 0, 0 )
                                    .lineTo( 10, 3 )
                                    .lineTo( 4, -6 )
                                    .lineTo( 8, -4 )
                                    .lineTo( 2, -13 )
                                    .lineTo( 6, -11 )
                                    .lineTo( 0, -20 )
                                    .lineTo( -6, -11 )
                                    .lineTo( -2, -13 )
                                    .lineTo( -8, -4 )
                                    .lineTo( -4, -6 )
                                    .lineTo( -10, 3 )
                                    .close();
    
    var trunk = new scenery.Rectangle( -treeWidth / 2, 0, treeWidth, 10, 0, 0, {
      fill: '#6b4423'
    } );
    
    var leaves = new scenery.Path( leafShape, {
      fill: leafColor
    } );
    
    return new scenery.Node( _.extend( { children: [trunk,leaves] }, options ) );
  }
  
  function createLogo( isDark, hasTree, isFlipped, shapeType, groundType, mountainType, sunsetType, options ) {
    var angle = Math.PI / 10;
    var c = 50 * Math.cos( angle );
    var s = 40 * Math.sin( angle );
    
    var rx = 50;
    var ry = 50;
    
    var angle2 = Math.PI * 1;
    var c2 = rx * Math.cos( angle2 );
    var s2 = ry * Math.sin( angle2 );
    
    var angle3 = Math.PI * 0.15;
    var c3 = rx * Math.cos( angle3 );
    var s3 = ry * Math.sin( angle3 );
    
    var groundShape = {
      0: new kite.Shape().moveTo( -50, 0 )
                         .quadraticCurveTo( -25, -20, 0, 5 )
                         .smoothQuadraticCurveTo( c, s )
                         .ellipticalArc( 0, 0, 50, 40, 0, angle, Math.PI, false )
                         .close(),
      1: new kite.Shape().moveTo( c2, s2 - 10 )
                         .quadraticCurveTo( -28, -30, -5, 0 )
                         .smoothQuadraticCurveTo( c3, s3 - 10 )
                         .ellipticalArc( 0, -10, rx, ry, 0, angle3, angle2, false )
                         .close()
    }[shapeType];
    
    var skyShape = new kite.Shape().ellipticalArc( 0, -10, 45, 45, 0, 0, 2 * Math.PI, false )
                                   .close();
    
    var mountainShape = { 
      0: new kite.Shape().moveTo( -70, 70 )
                         .lineTo( 0, 0 )
                         .lineTo( 70, 70 )
                         .close()
    }[{ 0: 0, 1: 0, 2: 0 }[mountainType]];
    
    var snowShape = { 
      0: new kite.Shape().moveTo( 0, 0 ) // tip
                         .lineTo( 10, 10 )
                         .lineTo( 3, 7 )
                         .lineTo( 0, 10 )
                         .lineTo( -3, 7 )
                         .lineTo( -10, 10 )
                         .close()
    }[{ 0: 0, 1: 0, 2: 0 }[mountainType]];
                                    
    var sunburstShape = new kite.Shape().moveTo( 0, 0 );
    var sunburstN = 16;
    for ( var i = 0; i < sunburstN; i++ ) {
      var sunburstAngleUp = 2 * Math.PI * i / sunburstN;
      var sunburstAngleDown = 2 * Math.PI * ( i + 0.5 ) / sunburstN;
      sunburstShape.lineTo( 55 * Math.cos( sunburstAngleUp ), 55 * Math.sin( sunburstAngleUp ) );
      sunburstShape.ellipticalArc( 0, 0, 55, 55, 0, sunburstAngleUp, sunburstAngleDown, false );
      sunburstShape.lineTo( 0, 0 );
    }
    sunburstShape.close();
    
    var graphic = new scenery.Node();
    var background = new scenery.Node( { clipArea: skyShape } );
    
    var sunsetGradients = {
      // simple yellow to blue
      0: new scenery.RadialGradient( 0, 0, 0, 0, 0, 45 ).addColorStop( 0, '#fefe22' )
                                                        .addColorStop( 1, '#b2ffff' ),
      // yellow to violet sunset
      1: new scenery.RadialGradient( 0, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgb(240,230,225)' )
                                                        .addColorStop( 0.25, 'rgb(240,230,100)' )
                                                        .addColorStop( 0.4, 'rgb(230,190,190)' )
                                                        .addColorStop( 0.6, 'rgb(185,135,215)' )
                                                        .addColorStop( 0.8, 'rgb(105,70,200)' )
                                                        .addColorStop( 1, 'rgb(37,37,133)' ),
      // purplish sunset
      2: new scenery.RadialGradient( 0, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgb(244,185,128)' )
                                                        .addColorStop( 0.6, 'rgb(169,116,153)' )
                                                        .addColorStop( 1, 'rgb(37,28,60)' ),
      // something
      3: new scenery.RadialGradient( 0, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgb(230,230,100)' )
                                                        .addColorStop( 0.6, 'rgb(200,60,115)' )
                                                        .addColorStop( 1, 'rgb(37,37,133)' ),
      // more sun, with sky/sun matching PhET blue/yellow logo hue
      4: new scenery.RadialGradient( 0, 0, 0, 0, 0, 45 ).addColorStop( 0.20, '#fffa00' )
                                                        .addColorStop( 0.35, '#dafc80' )
                                                        .addColorStop( 1, '#bffddf' ), // #c8fdbf #b5feff
      // something, bolder
      5: new scenery.RadialGradient( 0, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgb(255,255,100)' )
                                                        .addColorStop( 0.6, 'rgb(220,30,115)' )
                                                        .addColorStop( 1, 'rgb(10,10,133)' ),
      // something, skew
      6: new scenery.RadialGradient( -25, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgb(230,230,100)' )
                                                          .addColorStop( 0.6, 'rgb(200,60,115)' )
                                                          .addColorStop( 1, 'rgb(37,37,133)' )
    };
    
    var sunburstGradients = {
      // something
      3: new scenery.RadialGradient( 0, 0, 0, 0, 0, 55 ).addColorStop( 0.2, 'rgba(230,230,100,0.3)' )
                                                        .addColorStop( 1, 'rgba(200,60,115,0.7)' ),
      // more sun, with sky/sun matching PhET blue/yellow logo hue
      4: new scenery.RadialGradient( 0, 0, 0, 0, 0, 45 ).addColorStop( 0.4, 'rgba(114,213,245,0)' )
                                                        .addColorStop( 1, 'rgba(114,213,245,0.7)' ) // #b5feff
    };
    
    var groundGradients = {
      // first green
      0: new scenery.RadialGradient( 0, -10, 0, 0, -10, 55 ).addColorStop( 0, '#1BA828' )
                                                            .addColorStop( 0.5, '#018e0e' )
                                                            .addColorStop( 0.8, '#007500' )
                                                            .addColorStop( 1, '#005B00' ),
      // gray
      1: new scenery.RadialGradient( 0, -10, 0, 0, -10, 55 ).addColorStop( 0, '#777777' )
                                                            .addColorStop( 0.7, '#444444' )
                                                            .addColorStop( 1, '#2a2a2a' ),
      // reduced saturation
      2: new scenery.RadialGradient( 0, -10, 0, 0, -10, 55 ).addColorStop( 0, '#292' )
                                                            .addColorStop( 0.5, '#282' )
                                                            .addColorStop( 0.8, '#171' )
                                                            .addColorStop( 1, '#151' ),
      // water?
      3: new scenery.RadialGradient( 0, -10, 0, 0, -10, 55 ).addColorStop( 0, '#249' )
                                                            .addColorStop( 0.5, '#248' )
                                                            .addColorStop( 0.8, '#137' )
                                                            .addColorStop( 1, '#135' ),
      // greener water?
      4: new scenery.RadialGradient( 0, -10, 0, 0, -10, 55 ).addColorStop( 0, '#259' )
                                                            .addColorStop( 0.5, '#258' )
                                                            .addColorStop( 0.8, '#147' )
                                                            .addColorStop( 1, '#145' )
    };
    
    var ground = new scenery.Path( groundShape, {
      fill: groundGradients[groundType],
      stroke: 'rgba(0,0,0,0.2)'
    } );
    
    var sunset = new scenery.Path( skyShape, {
      fill: sunsetGradients[sunsetType]
                                                                            
    } );
    
    function createMountain( darkColor, lightColor, snowColor, x, y, scale ) {
      var mountain = new scenery.Path( mountainShape, {
        fill: new scenery.RadialGradient( -x, -y, 0, -x, -y, 55 ).addColorStop( 0, lightColor )
                                                                 .addColorStop( 1, darkColor ),
        x: x,
        y: y,
        scale: scale
      } );
      
      var snow = new scenery.Path( snowShape, {
        fill: snowColor,
        x: x,
        y: y,
        scale: scale
      } );
      
      return new scenery.Node( { children: [mountain,snow] } );
    }
    
    var sunburst = new scenery.Path( sunburstShape, {
      fill: sunburstGradients[sunsetType]
    } );
    
    background.addChild( sunset );
    background.addChild( sunburst );
    if ( mountainType === 0 ) {
      background.addChild( createMountain( '#999', '#ccc', '#fff', 25, -20, 1 ) );
    } else if ( mountainType === 1 ) {
      background.addChild( createMountain( '#888', '#aaa', '#fff', 34, -6, 0.7 ) );
      background.addChild( createMountain( '#999', '#ccc', '#fff', 20, -13, 1 ) );
    } else if ( mountainType === 2 ) {
      background.addChild( createMountain( '#999', '#ccc', '#fff', 23, -13, 1 ) );
    }
    graphic.addChild( background );
    graphic.addChild( ground );
    if ( hasTree ) {
      var foregroundTreeColor = new scenery.LinearGradient( -10, 0, 10, 0 ).addColorStop( 0, '#018E0E' )
                                                                           .addColorStop( 1, '#1ba828' );
      graphic.addChild( createTree( foregroundTreeColor, { x: -28, y: -13, scale: 1.1 } ) );
      graphic.addChild( createTree( '#018e0e', { x: 25, y: 17, scale: 0.4 } ) );
      graphic.addChild( createTree( '#1ba828', { x: 17, y: 14, scale: 0.5 } ) );
    }
    
    if ( isFlipped ) {
      graphic.scale( -1, 1 );
    }
    
    var text = new scenery.Text( 'Scenery', {
      fill: isDark ? '#eee' : '#333',
      font: 'lighter 70px "Muli", sans-serif',
      centerY: graphic.centerY - 2,
      left: graphic.right + 20
    } );
    
    return new scenery.Node( _.extend( { children: [graphic, text] }, options ) );
  }
  
  scene.addChild( new scenery.Rectangle( 0, 325, 1720, 1720, 0, 0, {
    fill: '#000'
  } ) );
  
  // function createLogo( isDark, hasTree, isFlipped, shapeType, groundType, mountainType, sunsetType, options )
  
  // white logo
  scene.addChild( createLogo( false, false, true, 0, 0, 1, 3, { x: 60, y: 60 } ) );
  scene.addChild( createLogo( false, false, false, 1, 2, 0, 3, { x: 520, y: 60 } ) );
  scene.addChild( createLogo( false, false, false, 0, 2, 0, 3, { x: 980, y: 60 } ) );
  
  scene.addChild( createLogo( false, false, true, 0, 2, 2, 3, { x: 60, y: 165 } ) );
  scene.addChild( createLogo( false, false, false, 1, 2, 2, 3, { x: 520, y: 165 } ) );
  scene.addChild( createLogo( false, false, false, 0, 2, 2, 3, { x: 980, y: 165 } ) );
  
  scene.addChild( createLogo( false, false, true, 0, 2, 0, 3, { x: 60, y: 270 } ) );
  scene.addChild( createLogo( false, false, false, 1, 0, 1, 3, { x: 520, y: 270 } ) );
  scene.addChild( createLogo( false, false, false, 0, 0, 1, 3, { x: 980, y: 270 } ) );
  
  // black logo
  scene.addChild( createLogo( true, false, true, 0, 2, 0, 3, { x: 60, y: 400 } ) );
  scene.addChild( createLogo( true, false, false, 1, 0, 1, 3, { x: 520, y: 400 } ) );
  scene.addChild( createLogo( true, false, false, 0, 0, 1, 3, { x: 980, y: 400 } ) );
  
  scene.addChild( createLogo( true, false, true, 0, 2, 2, 3, { x: 60, y: 505 } ) );
  scene.addChild( createLogo( true, false, false, 1, 2, 2, 3, { x: 520, y: 505 } ) );
  scene.addChild( createLogo( true, false, false, 0, 2, 2, 3, { x: 980, y: 505 } ) );
  
  scene.addChild( createLogo( true, false, true, 0, 0, 1, 3, { x: 60, y: 610 } ) );
  scene.addChild( createLogo( true, false, false, 1, 2, 0, 3, { x: 520, y: 610 } ) );
  scene.addChild( createLogo( true, false, false, 0, 2, 0, 3, { x: 980, y: 610 } ) );
  
  scene.updateScene();
  
  // function tick() {
  //   window.requestAnimationFrame( tick, $main[0] );
    
  //   scene.updateScene(); // repaints dirty regions. use renderScene() to render everything
  // }
  // window.requestAnimationFrame( tick, $main[0] );


  </script>

</body>
</html>
