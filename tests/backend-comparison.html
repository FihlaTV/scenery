<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>

  <title>Scenery Rendering Backend Comparison</title>
  
  <!-- jQuery and LoDash are dependencies -->
  <script src="../contrib/jquery-1.8.3.min.js"></script>
  <script src="../contrib/lodash.min-1.0.0-rc.3.js"></script>
  
  <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
  <script src="../scenery.js"></script>
  <!-- <script src="../scenery-min.js"></script> -->
  
  <style type="text/css">
    .testname {
      clear: both;
      padding-top: 20px;
    }
    
    .scene {
      float: left;
      margin-left: 5px;
      position: relative; /* trigger correct positioning inside the scene */
      background-color: #fff;
      z-index: 0;
      padding: none !important; /* in case we add jQuery Mobile back in */
      border: 1px solid black;
    }

  </style>
</head>

<body>
  
  <h1>Scenery Rendering Backend Comparison</h1>
  
  <script>
  
  $( window ).ready( function() {
    var testCases = [
      {
        name: 'Rectangle',
        width: 64,
        height: 64,
        draw: function( scene ) {
          scene.addChild( new scenery.Path( {
            shape: scenery.Shape.rectangle( 0, 0, 44, 44 ),
            x: 10.5,
            y: 10.5,
            fill: '#ff0000',
            stroke: '#000000',
            lineWidth: 3
          } ) );
        }
      },{
        name: 'Hexagon',
        width: 64,
        height: 64,
        draw: function( scene ) {
          scene.addChild( new scenery.Path( {
            shape: scenery.Shape.regularPolygon( 6, 22 ),
            x: 32,
            y: 32,
            fill: '#ff0000',
            stroke: '#000000',
            lineWidth: 3
          } ) );
        }
      },{
        name: 'RGBA',
        width: 64,
        height: 64,
        draw: function( scene ) {
          scene.addChild( new scenery.Path( {
            shape: scenery.Shape.rectangle( 32, 0, 32, 64 ),
            fill: '#000000'
          } ) );
          scene.addChild( new scenery.Path( {
            shape: scenery.Shape.rectangle( 0, 0, 44, 44 ),
            x: 10.5,
            y: 10.5,
            fill: 'rgba(255,0,0,0.5)',
            stroke: '#000000',
            lineWidth: 3
          } ) );
        }
      },{
        name: 'Overlapping and Nested Rotations',
        width: 128,
        height: 128,
        draw: function( scene ) {
          var container = new scenery.Node( {
            x: 40,
            rotation: Math.PI / 12
          } );
          scene.addChild( container );
          
          container.addChild( new scenery.Path( {
            shape: scenery.Shape.rectangle( 0, 0, 44, 44 ),
            x: 10.5,
            y: 10.5,
            rotation: Math.PI / 4,
            fill: '#ff0000',
            stroke: '#000000',
            lineWidth: 3
          } ) );
          
          container.addChild( new scenery.Path( {
            shape: scenery.Shape.rectangle( 0, 0, 44, 44 ),
            x: 30.5,
            y: 10.5,
            fill: '#ff0000',
            stroke: '#000000',
            // lineJoin: 'round',
            lineWidth: 10
          } ) );
        }
      }
    ];
    
    var backends = [
      scenery.LayerType.Canvas,
      scenery.LayerType.SVG
      // TODO: add WebGL, and possibly DOM for things like text?
    ];
    
    _.each( testCases, function( testCase ) {
      var $testTitle = $( document.createElement( 'h2' ) );
      $testTitle.text( testCase.name );
      $testTitle.addClass( 'testname' );
      $( document.body ).append( $testTitle );
      
      _.each( backends, function( backend ) {
        var $container = $( document.createElement( 'div' ) );
        $container.addClass( 'scene' );
        $container.width( testCase.width || 320 );
        $container.height( testCase.height || 240 );
        $( document.body ).append( $container );
        
        var scene = new scenery.Scene( $container, {
          preferredSceneLayerType: backend
        } );
        
        try {
          testCase.draw( scene );
        } catch( e ) {
          if ( console.log ) {
            console.log( 'error encountered in test ' + testCase.name + ' with ' + backend.name );
          }
          throw e;
        }
        scene.updateScene();
      } );
    } );
  } );

  </script>

</body>
</html>
