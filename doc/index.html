<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <!-- runs in full-screen mode on iOS devices -->
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>phet-scene Documentation</title>
    
    <link rel="stylesheet" href="../contrib/bootstrap-2.2.2.css">
    <link rel="stylesheet" href="../contrib/syntaxhighlighter-3.0.83/shCore.css">
    <link rel="stylesheet" href="../contrib/syntaxhighlighter-3.0.83/shThemeDefault.css">
    
    <!-- jQuery and underscore.js are dependencies -->
    <script src="../contrib/jquery-1.8.3.min.js"></script>
    <script src="../contrib/underscore-1.4.3-min.js"></script>
    
    <!-- For the styling -->
    <script src="../contrib/bootstrap-2.2.2.js"></script>
    
    <script src="../contrib/syntaxhighlighter-3.0.83/shCore.js"></script>
    <script src="../contrib/syntaxhighlighter-3.0.83/shBrushJScript.js"></script>
    <script src="../contrib/syntaxhighlighter-3.0.83/shBrushXml.js"></script>
    
    <!-- MathJax config -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <!-- Our code, in either the concatenated 'with comments' version or the minified version -->
    <script src="../concatenated.js"></script>
    <!-- <script src="../phet-scene-min.js"></script> -->
    
    <style type="text/css">
        
        .exampleScene {
            margin: 15px auto;
            border: 1px solid black;
        }

    </style>
    
</head>

<body>
    <div class="row-fluid">
        <div class="span2"></div>
        <div class="span8">
            <h1>Documentation</h1>
            <p class="text-warning">Currently, this is written as if the user has experience with other scene graphs. Will include more information later.</p>
            <p class="text-warning">TODO: organization and style</p>
            <p class="text-warning">Note about building JS before docs will work locally</p>
            
            <h2>A Brief Tour</h2>
            
            <h3>Hello World</h3>
            
            <div id="hello-world-scene" style="width: 400px; height: 100px;" class="exampleScene"></div>
            
            <script type="text/javascript">
                $( window ).ready( function() {
                    // Create a scene graph over the block-level element. Everything inside is replaced
                    var scene = new phet.scene.Scene( $( '#hello-world-scene' ) );
                    
                    // Add our text
                    scene.root.addChild( new phet.scene.Text( 'Hello World', {
                        centerX: 200, // the center of our text's bounds is at x = 200
                        centerY: 50, // the center of our text's bounds is at y = 50
                        font: '25px sans-serif'
                    } ) );
                    
                    // Paint any changes (in this case, our text).
                    scene.updateScene();
                } );
            </script>
            
            <p>
                Include the phet-scene script in the page, and create a block-level element (like a div) that has a width and height that won't change with its contents:
            </p>
            
            <pre class="brush: html">
&lt;div id="hello-world-scene" style="width: 400px; height: 100px;"&gt;&lt;/div&gt;
            </pre>
            
            <p>
                The following JS code will initialize a scene graph, add some centered text into the scene, and paint it into the div.
            </p>
            
            <pre class="brush: js">
// Create a scene graph over the block-level element. Everything inside is replaced
var scene = new phet.scene.Scene( $( '#hello-world-scene' ) );

// Add our text
scene.root.addChild( new phet.scene.Text( 'Hello World', {
    centerX: 200, // the center of our text's bounds is at x = 200
    centerY: 50, // the center of our text's bounds is at y = 50
    font: '25px sans-serif'
} ) );

// Paint any changes (in this case, our text).
scene.updateScene();
            </pre>
            
            <h3>Shapes</h3>
            
            <p>
                Nodes are the basic structure of the scene graph, and can be given shapes. Shapes can be built from convenience
                functions, or from Canvas-style calls. Exact bounding boxes of shapes are calculated, including any strokes.
            </p>
            
            <div id="shapes-scene" style="width: 220px; height: 100px;" class="exampleScene"></div>
            
            <script type="text/javascript">
                $( window ).ready( function() {
                    var scene = new phet.scene.Scene( $( '#shapes-scene' ) );
                    
                    // A rectangle at (10,10) with a width of 50 and height of 80
                    scene.root.addChild( new phet.scene.Node( {
                        shape: phet.scene.Shape.rectangle( 10, 10, 50, 80 ),
                        fill: '#ff0000'
                    } ) );
                    
                    // An octogon, with a radius of 30
                    scene.root.addChild( new phet.scene.Node( {
                        shape: phet.scene.Shape.regularPolygon( 8, 30 ),
                        fill: '#00ff00',
                        stroke: '#000000',
                        x: 100, // the shape is centered at the origin, so offset it by this x and y
                        y: 50
                    } ) );
                    
                    // Custom shapes can also be created
                    var customShape = new phet.scene.Shape();
                    customShape.moveTo( 0, 0 );
                    customShape.lineTo( 40, 40 );
                    customShape.quadraticCurveTo( 80, 0, 40, -40 );
                    customShape.lineTo( 40, 0 );
                    customShape.close();
                    // NOTE: this can also be chained, like shape.moveTo( ... ).lineTo( ... ).close()
                    
                    scene.root.addChild( new phet.scene.Node( {
                        shape: customShape,
                        fill: '#0000ff',
                        stroke: '#000000',
                        lineWidth: 3,
                        x: 150,
                        y: 50
                    } ) );
                    
                    scene.updateScene();
                } );
            </script>
            
            <pre class="brush: js">
// A rectangle at (10,10) with a width of 50 and height of 80
scene.root.addChild( new phet.scene.Node( {
    shape: phet.scene.Shape.rectangle( 10, 10, 50, 80 ),
    fill: '#ff0000'
} ) );

// An octogon, with a radius of 30
scene.root.addChild( new phet.scene.Node( {
    shape: phet.scene.Shape.regularPolygon( 8, 30 ),
    fill: '#00ff00',
    stroke: '#000000',
    x: 100, // the shape is centered at the origin, so offset it by this x and y
    y: 50
} ) );

// Custom shapes can also be created
var customShape = new phet.scene.Shape();
customShape.moveTo( 0, 0 );
customShape.lineTo( 40, 40 );
customShape.quadraticCurveTo( 80, 0, 40, -40 );
customShape.lineTo( 40, 0 );
customShape.close();
// NOTE: this can also be chained, like shape.moveTo( ... ).lineTo( ... ).close()

scene.root.addChild( new phet.scene.Node( {
    shape: customShape,
    fill: '#0000ff',
    stroke: '#000000',
    lineWidth: 3,
    x: 150,
    y: 50
} ) );
            </pre>
            
            <h3>Nodes</h3>
            
            <p>
                Nodes can be created and modified currently in a few different ways:
            </p>

            <pre class="brush: js">
// The following are all equivalent ways to create a node, listed in approximate order of increasing performance (if it is relevant).

var someShape = ...; // a shape used for brevity in the following calls, otherwise setting the bottom of the node makes no sense

// Declarative pattern. NOTE: the parameters are executed in a specific order which is particularly important
// for transformation and bounds-based parameters. Using translations like 'x' or 'bottom' do not change the
// point around which rotation or scaling is done in the local coordinate frame, and bounds-based modifiers
// like 'bottom' (which moves the bottom of the node's bounds to the specific y-value) are handled after other
// modifiers have been run.
var node1 = new phet.scene.Node( {
    shape: someShape,
    fill: '#000000',
    rotation: Math.PI / 2,
    x: 10,
    bottom: 200
} );

// ES5-setter style, called internally by the declarative paramter object style above
var node2 = new phet.scene.Node();
node2.shape = someShape;
node2.fill = '#000000';
node2.x = 10; // note the reordering, as this is precisely how the declarative style is executed
node2.rotation = Math.PI / 2;
node2.bottom = 200;

// Java-style setters, called internally from the ES5-setter style above
var node3 = new phet.scene.Node();
node3.setShape( someShape );
node3.setFill( '#000000' );
node3.setX( 10 );
node3.setRotation( Math.PI / 2 );
node3.setBottom( 200 );

// Chained style, since setters return a this-reference.
var node4 = new phet.scene.Node().setShape( someShape ).setFill( '#000000' ).setX( 10 ).setRotation( Math.PI / 2 ).setBottom( 200 );

// Additionally, parameters can be accessed by two styles:
node2.rotation === node3.getRotation();
            </pre>
            
            <h2>Appendix (to be completed later)</h2>
            
            <p>
                An example of math with MathJax, verifying it doesn't trample dollar signs in pre tags: $f(\theta)^2$
            </p>
        </div>
        <div class="span2"></div>
    </div>
    
    

    
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
</body>
</html>